# Epidora2.md (소피아 실행용 오류검증 SSOT) v1.1
> 목적: 소피아가 “문장/문서/워크플로우/리포트”를 6대 오류구조로 **빠르게 판정**하고
> 즉시 **교정 질문(EPI)** 과 **수정 지시(Rewrite)** 를 출력하는 실행 정의서

---

## 0) 범위와 출력

### 0.1 검증 대상(Input)
- 사용자 발화/메모/요청문
- 소피아 요약/분류/태깅 결과
- 워크플로우 정의(단계/규칙/조건)
- 실행 로그 기반 리포트(원인 분석, 개선 제안)
- 정책/헌법/윤리 관련 문장

### 0.2 검증 산출(Output)
- `primary_error`: 1~6 (주 오류 1개)
- `secondary_errors`: 0~2개 (부 오류 태그)
- `status`: `CONFIRMED` | `SUSPECTED` | `NONE`
- `scores`: 오류별 점수
- `axes_split`: 언어/국면/층위/조건/관찰자 5축 분해
- `antidote`: EPI 질문(정확 문구) + 운영 해석 + 재작성 지시
- `recheck`: 재검증 기준

---

## 1) 운영 원칙(오용 방지)
1. 억지 분류 금지: “조건 체크 + 점수” 없이 결론 금지
2. 상태 임계값 SSOT: `score >= 2.0 → CONFIRMED (중단 + Rewrite 강제 + 사용자 검토 요청), 1.0 <= score < 2.0 → SUSPECTED (경고 + EPI 질문 트리거), score < 1.0 → NONE (통과)`
3. 다중 오류 허용: 주 1개 + 부 0~2개
4. 자동 반영 금지: 소피아는 “검토 요청 문서”까지만, 반영은 사용자 결정

---

## 2) Quick Triage (초기 라우팅 3+1문장)
아래 질문으로 “우선 후보”를 잡는다.

1) 위계/정의/포함/자기참조가 무너졌는가? → 오류3 우선
2) 생성 국면(규칙/의도/정의)과 적용 국면(판정/실행/관측)이 섞였는가? → 오류2 우선
3) 개입(선택/해석/편집)이 숨겨져 객관처럼 서술되는가? → 오류6 우선
4) 단어 1개의 정의 경직이면 E1, 가정 묶음/모형(관계망)이 고정이면 E5

> triage는 “확정”이 아니라 “후보 선정”이다. 최종은 스코어로 결정한다.

---

## 3) 5축 분해(정밀 분석 프로토콜)
모든 케이스는 아래 5축을 최소 1줄씩 기록한다.

- 언어(Language): 핵심 용어 3개 + 임시 정의(문맥 기준)
- 국면(Phase): 생성(룰/의도/정의) vs 적용(판정/실행/관측) 분리 여부
- 층위(Level): 규칙/정의 레벨 vs 사례/대상 레벨 분리 여부
- 조건(Condition): 범위/예외/전제/성립조건 명시 여부
- 관찰자(Observer): 누가/무엇이 선택·편집·판정했는지 표시 여부

---

## 4) 점수 규칙(공통)
조건마다 점수: `0 / 0.5 / 1`

- 상태 판정은 **오직 §1-2 임계값 SSOT**만 사용한다.
- 문서 내 다른 임계값 문장은 허용하지 않는다.

---

## 5) 오류 정의(Executable)

### Error 1) 언어 고정성 (Language Fixation)
**정의**
단어/범주가 현실 조건보다 먼저 굳어 대체 해석 가능성을 차단하는 상태.

**조건 체크**
- E1-C1: 핵심 용어가 단일 정의로 고정(대체 정의 검토 없음)
- E1-C2: 사례가 바뀌어도 같은 단어로 동일 판단을 강제
- E1-C3: “원래 뜻이 그렇다” 류의 정의 선점/봉쇄

**교정(Rewrite)**
- Split: 단어(이름)와 대상(현상/사례) 문장을 분리한다.
- Rewrite: 대체 정의 2개를 생성하고 각 정의로 동일 입력을 재판정한다.
- Recheck: 대체 정의 변경에도 결론이 동일하면 E5 동반 여부를 추가 점검한다.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-01`
- `canonical_question: "이 단어가 대상을 전부 담는가, 일부를 가리는가?"`
- `operational_interpretation: 단어가 가리는 것/드러내는 것 분리, 대체 정의 생성`

---

### Error 2) 시점/국면 혼합 (Phase Mixing)
**정의**
생성 국면(규칙/의도/정의 설정)과 적용 국면(판정/실행/관측)이 섞여 충돌하는 상태.

**조건 체크**
- E2-C1: 생성 문장과 적용 문장이 같은 문장/단락에서 혼합
- E2-C2: 미래 기준으로 현재를 즉시 단정, 혹은 현재 결과로 과거 의도를 역규정
- E2-C3: 평가 국면/시점이 명시되지 않아 국면 전환이 추론에 맡겨짐

**교정(Rewrite)**
- Split: 생성 문장과 적용 문장을 분리한다.
- Rewrite: 생성 문장에 `[PHASE:GENERATE]`, 적용 문장에 `[PHASE:APPLY]` 태그를 부여한다.
- Recheck: 두 국면이 다시 섞이면 E2 점수 +1, 필요 시 E3/E6 동반 재평가를 수행한다.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-02`
- `canonical_question: "지금은 규칙을 만드는가(생성), 규칙을 적용하는가(판정)?"`
- `operational_interpretation: 지금은 기준 생성인가, 적용/평가인가를 강제 분리`

---

### Error 3) 층위/위계 붕괴 (Hierarchical Collapse)
**정의**
규칙/정의(상위)와 사례/대상(하위)의 경계가 붕괴하여 포함/정의/자기참조에서 모순이 생기는 상태.

**핵심 트리거(축소형)**
- 핵심 A: 포함 관계 역전/자기포함(상위가 하위에 포함되거나 자신을 포함/배제)
- 핵심 B: 정의/판정이 자기 자신을 규정(자기참조)
- 보조: 기준의 기준을 끝없이 요구(무한 후퇴)

**조건 체크**
- E3-C0: 포함 관계 역전/자기포함(Set/Member reversal, self-inclusion/exclusion)
- E3-C1: 정의/판정의 자기참조 발생
- E3-C2: 규칙/사례 층위가 혼재되어 단방향 적용이 깨짐
- E3-C3: 보조 신호로 무한 후퇴 징후 존재

**교정(Rewrite)**
- Split: 상위(규칙/정의) 블록과 하위(사례/대상) 블록을 분리한다.
- Rewrite: 상위 블록에 적용 범위/예외/자기참조 금지 조건을 명시한다.
- Recheck: 규칙→사례 단방향 적용이 유지되는지 검증하고 역참조가 발생하면 E3 점수 +1한다.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-03`
- `canonical_question: "이 문장은 규칙(상위)인가, 사례/데이터(하위)인가?"`
- `operational_interpretation: 이 문장은 규칙인가 사례인가를 강제 판별 후 분리`

---

### Error 4) 연속의 이산화 (Discretizing Continuity)
**정의**
과정/흐름(연속)을 임의의 상태/컷(이산)으로 잘라 결과 해석이 왜곡되는 상태.

**조건 체크**
- E4-C1: 과정이 사라지고 결과 상태만 남아 원인-과정 연결 단절
- E4-C2: 컷 경계 기준이 임의적이며 다른 컷 기준에 취약
- E4-C3: 시간/단계가 과도 단순화되어 판단이 과확정

**교정(Rewrite)**
- Split: 결과/과정/전환 조건 문장을 분리한다.
- Rewrite: 최소 3단계(전/중/후)로 재서술하고 전환 조건을 명시한다.
- Recheck: 전환 조건 누락 시 E4 점수 +1, 국면 혼합이 동반되면 E2를 함께 점검한다.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-04`
- `canonical_question: "결과 사이에서 생략된 과정/전환 조건은 무엇인가?"`
- `operational_interpretation: 결과 직전 전환 조건/과정 복원`

---

### Error 5) 틀-우선 해석 (Frame-First)
**정의**
관측/증거보다 해석 틀(가정 묶음/모형)이 우선하여 반례가 왜곡·배제되는 상태.
구분: 오류1=Unit(단어), 오류5=Structure(관계망/모델)

**조건 체크**
- E5-C1: 데이터가 틀에 맞게 재해석/선별되고 반례는 예외 처리
- E5-C2: 가정 묶음이 숨겨져 있으며 틀 자체는 검증 대상에서 제외
- E5-C3: 대체 프레임 비교 없이 결론이 확정

**교정(Rewrite)**
- Split: 관측(사실) / 해석(틀) / 결론을 분리한다.
- Rewrite: 대체 프레임 1개를 적용해 동일 데이터를 재판정한다.
- Recheck: 프레임 변경 후 결론이 변하면 E5 유지, 변하지 않으면 불변량을 명시해 E5 점수 감산 검토.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-05`
- `canonical_question: "프레임을 바꾸면 결론이 바뀌는가, 그대로 남는가?"`
- `operational_interpretation: 프레임을 바꾸어도 남는 것/바뀌는 것 분리`

---

### Error 6) 개입의 은폐 (Concealment of Intervention)
**정의**
선택/해석/편집/관찰의 개입이 있었음에도 숨겨져 객관적 사실처럼 서술되어 인식이 왜곡되는 상태.

**핵심 3조건**
- 개입 존재: 요약/선택/강조/편집/평가가 들어감
- 은폐: 그 개입이 표시되지 않음(라벨/근거/원본 포인터 없음)
- 객관화: 결과가 사실처럼 유통되며 반증 경로가 막힘

**조건 체크**
- E6-C0: 주장 유형을 분류한다 (`Factual claim` vs `Interpretation/Proposal/Hypothesis`)
- E6-C1: 개입 존재
- E6-C2: 은폐
- E6-C3: 객관화
- E6-C4: (선택) 피드백 루프 존재(개입이 결과/행동/의사결정을 재구성)

**출처 강제 범위 (SSOT)**
- 사실 주장(`Factual claim`): `[Source pointer]`가 없으면 E6 점수 +1을 적용하고 **최소 `SUSPECTED`**로 판정한다.
- 해석/제안/가설(`Interpretation/Proposal/Hypothesis`): `[Interpretation]` 라벨이 있으면 출처 미첨부로 진행 가능하다.
- 원본 없이 단정하는 문장은 금지한다. 단, `[Interpretation]` 라벨이 명시된 해석 문장은 허용한다.

**교정(Rewrite)**
- Split: 원문/로그(사실) vs 요약/평가(해석) vs 목적(의도)을 분리한다.
- Rewrite: 해석 문장에는 `[Interpretation]` 라벨, 사실 문장에는 `[Source pointer]`를 강제한다.
- Recheck: 사실 주장에 포인터 누락 시 E6 점수 +1 및 최소 `SUSPECTED`, 해석 라벨 누락 시 재작성 요청.

**Antidote (EPI 매핑)**
- `EPI_ID: EPI-06`
- `canonical_question: "누가 관찰했고, 누가 선택/편집했으며, 출처는 무엇인가?"`
- `operational_interpretation: 누가 어떤 선택을 했는지(개입 주체/행위) 명시`

---

## 6) 표준 출력 포맷(리포트 SSOT)

### Epidora Verify Report (Markdown)
- 대상: (문서/문장/워크플로우/로그 포인터)
- 요약: (1~2줄)
- triage 후보: (오류 후보 1~3)
- 5축 분해:
  - 언어:
  - 국면(생성/적용):
  - 층위(규칙/사례):
  - 조건(범위/예외):
  - 관찰자(개입/편집):
- 점수:
  - E1: _
  - E2: _
  - E3: _
  - E4: _
  - E5: _
  - E6: _
- 결론:
  - status: CONFIRMED | SUSPECTED | NONE
  - primary_error: E_
  - secondary_errors: [E_, E_]
- antidote:
  - EPI_ID: EPI-0_
  - canonical_question: "..."
  - operational_interpretation: "..."
- rewrite:
  - Split:
  - Rewrite:
  - Recheck:

---

## 7) 소피아 연결 규칙(최소)
- 좌뇌(로컬): 사용자 언어로 리포트 제시, 자동 반영 금지, 검토 요청만
- 우뇌(서버): 비교/효율 분석 결과도 반드시 “Epidora Verify Report” 형식으로만 반환
- 저장: 원본(불변) + 리포트(가변) 분리 저장, 리포트에는 원본 포인터 필수(E6 방지)

---

## 8) canonical_question SSOT (완료)
미결 슬롯 없음. 아래 6개 문장을 문서 전체에서 동일 문자열로 재사용한다.

- `EPI-01`: "이 단어가 대상을 전부 담는가, 일부를 가리는가?"
- `EPI-02`: "지금은 규칙을 만드는가(생성), 규칙을 적용하는가(판정)?"
- `EPI-03`: "이 문장은 규칙(상위)인가, 사례/데이터(하위)인가?"
- `EPI-04`: "결과 사이에서 생략된 과정/전환 조건은 무엇인가?"
- `EPI-05`: "프레임을 바꾸면 결론이 바뀌는가, 그대로 남는가?"
- `EPI-06`: "누가 관찰했고, 누가 선택/편집했으며, 출처는 무엇인가?"
