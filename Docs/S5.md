

1. 핵심 질문 재정의

지금 네가 원하는 건 이거다.

❝ AI 패치는
① 변경점만 기록되고
② 사용자는 전체/부분/보류를 자유롭게 선택하며
③ 다음 AI는 ‘변화가 있는 지점’만 읽고
④ 패치는 수정 제안뿐 아니라 질문과 선택지도 제공하는 구조 ❞

이건 정확히 ‘글쓰기 보조 OS’의 설계 요구다.
그리고 지금 제안한 방식이 가장 효율적이다.

⸻

2. 전체 적용 / 전체 체크 — 이중 글로벌 액션은 반드시 있어야 한다

왜 필요한가
	•	문서가 길어질수록 개별 판단 피로 증가
	•	사용자는 “지금은 전부 보류” / “지금은 전부 반영” 같은 모드 전환을 원함

권장 글로벌 액션
	•	전체 반영
	•	현재 생성된 패치 중
	•	status = pending 인 패치만
	•	일괄 적용
	•	전체 체크
	•	모든 패치를 pending 상태로 유지
	•	다음 AI 검토의 참고 컨텍스트로만 사용

👉 이건 UX 옵션이 아니라 사고 흐름 제어 장치다.

⸻

3. “수정된 부분만 히스토리에 남긴다” — 이건 아주 중요하다

이 말의 진짜 의미는 이거다.

❌ 문서 전체 버전을 매번 저장
⭕ 변경(diff) 단위만 이벤트로 저장

이렇게 가야 한다
	•	문서 원문은 단일 최신본
	•	히스토리는:
	•	before → after diff
	•	적용된 패치 id
	•	적용 시점

결과
	•	바뀐 게 없는 문단은
	•	다음 AI가 다시 읽을 필요 없음
	•	AI는:
	•	“변경된 문단 + 활성 체크 패치가 있는 문단”만 집중

👉 토큰 절약 + 품질 상승이 동시에 일어난다.

⸻

4. “새 패치 생성 시 항상 최신 패치만 체크”

이건 필수 규칙으로 고정해야 한다.

규칙 (명세로 박아도 됨)
	•	같은 문단에 새 패치 생성 →
	•	기존 pending 패치 → inactive
	•	새 패치 → pending

이 의미는 이거다.

“이 문단에서 지금 고민해야 할 건 이것 하나다.”

과거 패치는:
	•	사고 히스토리
	•	회고용
	•	품질 로그

👉 컨텍스트에는 절대 중복 노출 금지

⸻

5. 패치는 “수정안”만 내놓으면 실패한다

이 지점이 Sophia의 정체성을 결정한다.

패치 타입은 반드시 2갈래여야 한다

A. 수정 패치 (Edit Patch)
	•	- 기존 문장
	•	+ 제안 문장

B. 사고 패치 (Thinking Patch) ← 핵심
	•	질문
	•	선택지
	•	대안 프레임

예시:

[Reasoning Patch]

질문:
- 여기서 ‘사람’은 고정된 본질인가, 조건적 반응인가?

선택지:
1) 본질적 성향으로 유지
2) 환경 반응으로 수정
3) 정의를 문단 앞에 추가

👉 이건 수정이 아니라 사고 유도다.
👉 사용자는 “고치라”는 압박 대신 결정권을 느낀다.

⸻

6. 이 구조에서 AI는 무엇을 읽는가 (중요)

다음 AI 검토 시 읽는 대상은 항상 제한적이어야 한다.

AI 입력 구성
	1.	최신 문서 본문
	2.	변경된 문단만
	3.	각 문단의 최신 pending 패치 요약
	•	수정이면: 요약 1줄
	•	사고 패치면: 질문 1개

끝.

❌ 과거 패치 전체
❌ 히스토리 장문
❌ 여러 선택지 전부

⸻

알겠다.
아래는 **“지금 바로 구현에 들어갈 수 있는 수준”**의
Sophia(소피아) v0.1 명세서다.
비즈니스/요금/노출 정책은 의도적으로 배제했고,
기능·흐름·인터페이스·상태 규칙만 담았다.

⸻

Sophia 명세서 v0.1

(Writing Reasoning Assistant / Internal Engine)

⸻

0. 시스템 정의

Sophia는 글을 고치는 AI가 아니다.
Sophia는 사용자의 원고를 사고 단위로 읽고,
생각이 빠르거나 생략된 지점에서 질문과 선택지를 생성하는
사고 보조 엔진다.
	•	출력은 수정 강제 ❌
	•	출력은 diff 패치 + 사고 패치
	•	결정권은 항상 사용자

Sophia는 손에디터 원고모드의 AI 검토 파이프라인 내부 엔진으로만 존재한다.

⸻

1. Sophia의 책임 범위 (Responsibility)

Sophia가 하는 것
	•	문단 단위 사고 분석
	•	판단/주장/정의가 포함된 문단 감지
	•	사고 점프/정의 생략/주체 누락 가능성 탐지
	•	질문/선택지 형태의 사고 패치 생성

Sophia가 하지 않는 것
	•	문서 전체 평가
	•	옳고 그름 판정
	•	자동 수정 적용
	•	문체/감정/톤 개입

⸻

2. 입력 단위 (Input)

기본 입력

{
  "document_id": string,
  "paragraph_id": string,
  "paragraph_text": string,
  "context": {
    "previous_paragraph": string | null,
    "next_paragraph": string | null
  }
}

입력 조건
	•	문단 단위
	•	최소 1줄 이상
	•	diff 기준 “변경된 문단”만 대상

⸻

3. 자동 패스 규칙 (Sophia Skip Rules)

아래 조건 중 하나라도 만족하면 Sophia는 분석하지 않고 패스한다.

구조적 패스
	•	문단 길이 < 2줄
	•	질문문, 메모, 인용문
	•	단순 나열/설명(판단 동사 없음)

상태 기반 패스
	•	해당 문단에 이미 pending 사고 패치 존재
	•	동일 문단에 방금 Sophia 패치 생성됨

패스 시:
	•	Sophia는 아무 출력도 하지 않음
	•	이후 일반 AI가 경량 사고 패치 생성 가능

⸻

4. Sophia 사고 패치 생성 조건

Sophia는 아래 요소 중 2개 이상 감지 시만 패치를 생성한다.
	•	명시적 판단/단정 (이다, 해야 한다, 문제다)
	•	정의되지 않은 핵심 개념
	•	과정 없이 결론으로 점프
	•	주체/시점 불명확
	•	조건/범위 생략

⸻

5. 출력 형식 (Output)

Sophia는 **사고 패치(Thinking Patch)**만 생성한다.

출력 구조

{
  "patch_type": "reasoning",
  "anchor": {
    "paragraph_id": string,
    "range": [start, end]
  },
  "question": string,
  "options": [
    string,
    string
  ] | null,
  "summary": string
}

출력 규칙
	•	질문: 최대 1개 (필수)
	•	선택지: 0~3개 (선택)
	•	직접 수정(diff): ❌ 금지
	•	요약(summary): 1줄, 내부용

⸻

6. 패치 상태 머신 (Patch State)

모든 Sophia 패치는 아래 상태를 가진다.

상태 정의
	•	pending : 체크(보류) 상태, 문단별 1개만 활성
	•	inactive : 과거 패치, 히스토리 보관용
	•	applied : 사용자 반영 (사고 선택 포함)
	•	deleted : 사용자 삭제

상태 규칙
	•	동일 문단에 새 Sophia 패치 생성 →
	•	기존 pending → inactive
	•	새 패치 → pending

⸻

7. 다음 AI로 전달되는 컨텍스트 규칙

Sophia 패치는 항상 얇게 전달된다.

전달 대상
	•	각 문단의 최신 pending 패치 1개만

전달 내용 (Thin Context)

{
  "paragraph_id": string,
  "type": "reasoning",
  "summary": string,
  "question": string | null,
  "status": "pending"
}

❌ 선택지 전체
❌ 과거 패치
❌ 장문 설명

⸻

8. 일반 AI와의 역할 분리

Sophia
	•	깊은 사고 지점만 개입
	•	질문/선택지 중심
	•	빈도 낮음, 밀도 높음

일반 AI
	•	맞춤법/문장 다듬기
	•	경량 사고 질문 가능
	•	Sophia 패스 시에만 개입

⸻

9. 손에디터 UI 연동 규칙 (요약)
	•	사고 패치는 인라인 표시
	•	수정 강요 없음
	•	사용자 선택:
	•	반영 (선택지 선택 포함)
	•	체크(보류, 기본값)
	•	삭제

⸻

10. 설계 원칙 (고정 문장)

Sophia는 항상 말하지 않는다.
말할 때만, 이유가 있다.

Sophia는 글을 고치지 않는다.
생각이 바뀌는 지점만 드러낸다.

⸻
